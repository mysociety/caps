{% extends "scoring/base.html" %}
{% load bootstrap4 %}

{% block content %}

    <div class="container-fluid hero bg-grey-gradient">
        <h1 class="text-center mb-3">About the ranking</h1>
        <p class="text-center mx-auto" style="max-width: 650px;">Amet minim mollit non deserunt ullamco est sit aliqua dolor do amet sint.
            Velit officia consequat duis enim velit mollit. Exercitation veniam consequat sunt 
            nostrud amet. Amet minim mollit non deserunt ullamco est sit aliqua dolor do amet 
            sint. Velit officia consequat duis enim velit mollit. Exercitation veniam consequat 
            sunt nostrud amet.</p>
        <a class="cta mx-auto" href="#methodology">Learn more about the league</a>

        <div class="table-filter row justify-content-md-center mx-auto mt-4 mt-lg-5" style="max-width: 1100px;">
            <div class="col-12 col-lg-6 bg-blue-l2 left py-3">
                <form class="form">
                    <h6 class="mb-3">Find your council on the league table</h6>
                    <input class="form-control searchbar blue light mb-5" type="search" placeholder="Search" aria-label="Search">
                    
                    <h6 class="mb-3">filter the league by type of council</h6>
                    <ul class="type-council-option-wrapper">
                        <li class="radio-btn">
                            <input type='radio' value='1' name='radio' id='radio1' checked/>
                            <label for='radio1'>Single Tier</label>
                        </li>
                        <li class="radio-btn">
                            <input type='radio' value='2' name='radio' id='radio2' />
                            <label for='radio1'>Distric</label>
                        </li>
                        <li class="radio-btn">
                            <input type='radio' value='3' name='radio'  id='radio3'/>
                            <label for='radio2'>County</label>
                        </li>
                        <li class="radio-btn">
                            <input type='radio' value='4' name='radio'  id='radio4'/>
                            <label for='radio3'>Northern Ireland</label>
                        </li>
                        <li class="radio-btn">
                            <input type='radio' value='5' name='radio'  id='radio5'/>
                            <label for='radio3'>Combined Authorithy</label>
                        </li>
                    </ul>
                </form>
            </div>

            <div class="col-12 col-lg-6 py-3 bg-green-l2 right">
                <form class="form">
                    <h6 class="mb-3">Check for a councilâ€™s data breakdown</h6>
                    <input class="form-control searchbar green dark mb-4" type="search" placeholder="Search" aria-label="Search">
                </form>
            </div>
        </div>
    </div>

    <a href="https://css-tricks.com/a-table-with-both-a-sticky-header-and-a-sticky-first-column/">stickky table</a>
    <div class="container-fluid" style="max-width: 1440px;">
        <div class="league-table-wrapper">
            <table class="league-table">
                <thead>
                    <tr>
                        <th scope="col"></th>
                        <th scope="col" class="total-score">
                            <div class="table-header-first-row">
                                <span>Total Score</span>
                                <div class="sort-icon green"></div>
                            </div>
                        </th>
                        <th scope="col" class="category-1">
                            <div class="table-header-first-row">
                                <a href="">Governance, development and funding</a>
                                <div class="sort-icon"></div>
                            </div>
                        </th>
                        <th scope="col" class="category-2">
                            <div class="table-header-first-row">
                                <a href="">Mitigation and Adaptation</a>
                                <div class="sort-icon"></div>
                            </div>
                        </th>
                        <th scope="col" class="category-3">
                            <div class="table-header-first-row">
                                <a href="">Community engagement and communications</a>
                                <div class="sort-icon"></div>
                            </div>
                        </th>
                        <th scope="col" class="category-4">
                            <div class="table-header-first-row">
                                <a href="">Measuring and setting emissions targets</a>
                                <div class="sort-icon"></div>
                            </div>
                        </th>
                        <th scope="col" class="category-5">
                            <div class="table-header-first-row">
                                <a href="">Commitment and Integration</a>
                                <div class="sort-icon"></div>
                            </div>
                        </th>
                        <th scope="col" class="category-6">
                            <div class="table-header-first-row">
                                <a href="">Diversity and Social Inclusion</a>
                                <div class="sort-icon"></div>
                            </div>
                        </th>
                        <th scope="col" class="category-7">
                            <div class="table-header-first-row">
                                <a href="">Education, Skills and Training</a>
                                <div class="sort-icon"></div>
                            </div>
                        </th>
                        <th scope="col" class="category-8">
                            <div class="table-header-first-row">
                                <a href="">Ecological emergency</a>
                                <div class="sort-icon"></div>
                            </div>
                        </th>
                        <th scope="col" class="category-9">
                            <div class="table-header-first-row">
                                <a href="">Co-benefits</a>
                                <div class="sort-icon"></div>
                            </div>
                        </th>
                    </tr>
                    <tr>
                        <th scope="col" class="second-row">Council name</th>
                        <th scope="col" class="second-row">              
                            <div class="score-bar">
                                <span class="score-percentage">70%</span>
                                <div class="progress-bar"></div>
                                <span class="average">avg</span>
                            </div>
                        </th>
                        <th scope="col" class="category-1 second-row">              
                            <div class="score-bar">
                                <span class="score-fraction">5/6</span>
                                <div class="progress-bar"></div>
                                <span class="average">avg</span>
                            </div>
                        </th>
                        <th scope="col" class="category-2 second-row">              
                            <div class="score-bar">
                                <span class="score-fraction">5/6</span>
                                <div class="progress-bar"></div>
                                <span class="average">avg</span>
                            </div>
                        </th>
                        <th scope="col" class="category-3 second-row">              
                            <div class="score-bar">
                                <span>4/6</span>
                                <span class="average">avg</span>
                            </div>
                        </th>
                        <th scope="col" class="category-4 second-row">              
                            <div class="score-bar">
                                <span>4/6</span>
                                <span class="average">avg</span>
                            </div>
                        </th>
                        <th scope="col" class="category-5 second-row">              
                            <div class="score-bar">
                                <span>4/6</span>
                                <span class="average">avg</span>
                            </div>
                        </th>
                        <th scope="col" class="category-6 second-row">              
                            <div class="score-bar">
                                <span>4/6</span>
                                <span class="average">avg</span>
                            </div>
                        </th>
                        <th scope="col" class="category-7 second-row">              
                            <div class="score-bar">
                                <span>4/6</span>
                                <span class="average">avg</span>
                            </div>
                        </th>
                        <th scope="col" class="category-8 second-row">              
                            <div class="score-bar">
                                <span>4/6</span>
                                <span class="average">avg</span>
                            </div>
                        </th>
                        <th scope="col" class="category-9 second-row">              
                            <div class="score-bar">
                                <span>4/6</span>
                                <span class="average">avg</span>
                            </div>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th scope="row" class="council-name">Abdur distric council</th>
                        <th scope="row" class="council-total-score">
                            <div class="score-bar">
                                <span class="score-percentage">90%</span>
                                <div class="progress-bar"></div>
                            </div>
                        </th>
                        <th scope="row" class="council-category-score">
                            <div class="score-bar">
                                <span>4/6</span>
                            </div>
                        </th>
                        <th scope="row" class="council-category-score">
                            <div class="score-bar">
                                <span>4/6</span>
                            </div>
                        </th>
                        <th scope="row" class="council-category-score">
                            <div class="score-bar">
                                <span>4/6</span>
                            </div>
                        </th>
                        <th scope="row" class="council-category-score">
                            <div class="score-bar">
                                <span>4/6</span>
                            </div>
                        </th>
                        <th scope="row" class="council-category-score">
                            <div class="score-bar">
                                <span>4/6</span>
                            </div>
                        </th>
                        <th scope="row" class="council-category-score">
                            <div class="score-bar">
                                <span>4/6</span>
                            </div>
                        </th>
                        <th scope="row" class="council-category-score">
                            <div class="score-bar">
                                <span>4/6</span>
                            </div>
                        </th>
                        <th scope="row" class="council-category-score">
                            <div class="score-bar">
                                <span>4/6</span>
                            </div>
                        </th>
                        <th scope="row" class="council-category-score">
                            <div class="score-bar">
                                <span>4/6</span>
                            </div>
                        </th>
                    </tr>
                    <tr>
                        <th scope="row">Venus</th>
                        <td>4.87</td>
                        <td>12,104</td>
                        <td>5243</td>
                        <td>8.9</td>
                        <td>2802.0</td>
                        <td>108.2</td>
                        <td>464</td>
                        <td>0</td>
                        <td></td>
                    </tr>
                    <tr>
                    <th scope="row">Earth</th>
                    <td>5.97</td>
                    <td>12,756</td>
                    <td>5514</td>
                    <td>9.8</td>
                    <td>24.0</td>
                    <td>149.6</td>
                    <td>15</td>
                    <td>1</td>
                    <td>Our world</td>
                    </tr>
                    <tr>
                    <th scope="row">Mars</th>
                    <td>0.642</td>
                    <td>6,792</td>
                    <td>3933</td>
                    <td>3.7</td>
                    <td>24.7</td>
                    <td>227.9</td>
                    <td>-65</td>
                    <td>2</td>
                    <td>The red planet</td>
                    </tr>
                    <tr>
                    <th rowspan="4" scope="rowgroup">Jovian planets</th>
                    <th rowspan="2" scope="rowgroup">Gas giants</th>
                    <th scope="row">Jupiter</th>
                    <td>1898</td>
                    <td>142,984</td>
                    <td>1326</td>
                    <td>23.1</td>
                    <td>9.9</td>
                    <td>778.6</td>
                    <td>-110</td>
                    <td>67</td>
                    <td>The largest planet</td>
                    </tr>
                    <tr>
                    <th scope="row">Saturn</th>
                    <td>568</td>
                    <td>120,536</td>
                    <td>687</td>
                    <td>9.0</td>
                    <td>10.7</td>
                    <td>1433.5</td>
                    <td>-140</td>
                    <td>62</td>
                    <td></td>
                    </tr>
                    <tr>
                    <th rowspan="2" scope="rowgroup">Ice giants</th>
                    <th scope="row">Uranus</th>
                    <td>86.8</td>
                    <td>51,118</td>
                    <td>1271</td>
                    <td>8.7</td>
                    <td>17.2</td>
                    <td>2872.5</td>
                    <td>-195</td>
                    <td>27</td>
                    <td></td>
                    </tr>
                    <tr>
                    <th scope="row">Neptune</th>
                    <td>102</td>
                    <td>49,528</td>
                    <td>1638</td>
                    <td>11.0</td>
                    <td>16.1</td>
                    <td>4495.1</td>
                    <td>-200</td>
                    <td>14</td>
                    <td></td>
                    </tr>
                    <tr>
                    <th colspan="2" scope="rowgroup">Dwarf planets</th>
                    <th scope="row">Pluto</th>
                    <td>0.0146</td>
                    <td>2,370</td>
                    <td>2095</td>
                    <td>0.7</td>
                    <td>153.3</td>
                    <td>5906.4</td>
                    <td>-225</td>
                    <td>5</td>
                    <td>Declassified as a planet in 2006, but this <a href="https://www.usatoday.com/story/tech/2014/10/02/pluto-planet-solar-system/16578959/">remains controversial</a>.</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        let scorePercentage = document.getElementsByClassName("score-percentage");

        for (var i = 0; i < scorePercentage.length; i++) {
            let percentageValue = scorePercentage[i].textContent;
            console.log(percentageValue);
            scorePercentage[i].nextElementSibling.style.width = percentageValue;
        }

        let scoreFraction = document.getElementsByClassName("score-fraction");
        for (var i = 0; i < scoreFraction.length; i++) {
            let fractionValue = scoreFraction[i].textContent;

            let splitFraction = fractionValue.split('/');
            let fractionToPercentage = parseInt(splitFraction[0], 10) / parseInt(splitFraction[1], 10) * 100;
            scoreFraction[i].nextElementSibling.style.width = fractionToPercentage + '%';
        }

    </script> 

    

    <p>
        <a href="{% url 'scoring' 'single' %}">Single Tier</a> :
        <a href="{% url 'scoring' 'district' %}">District</a> :
        <a href="{% url 'scoring' 'county' %}">County</a> :
        <a href="{% url 'scoring' 'combined' %}">Combined</a> :
        <a href="{% url 'scoring' 'northern-ireland' %}">Northern Ireland</a>
    </p>

    <p>
    <form method="GET">
        {{ form }}
         <input type="submit" value="Sort">
    </form>


    <table class="table mb-0">
        <thead>
            <tr>
                <th>Council</th>
                <th>Total</th>
                <th>Governance</th>
                <th>Mitigation</th>
                <th>Commitment</th>
                <th>Community</th>
                <th>Measuring</th>
                <th>Co-benefits</th>
                <th>Diversity</th>
                <th>Education</th>
                <th>Ecological</th>
            </tr>
        </thead>
        <tbody>
        <tr>
            <td></td>
            <td>
                {{ averages.total.percentage }}
            </td>
            <td>
                {{ averages.s1_gov.score }}/{{ averages.s1_gov.max }}
            </td>
            <td>
                {{ averages.s2_m_a.score }}/{{ averages.s2_m_a.max }}
            </td>
            <td>
                {{ averages.s3_c_a.score }}/{{ averages.s3_c_a.max }}
            </td>
            <td>
                {{ averages.s4_coms.score }}/{{ averages.s4_coms.max }}
            </td>
            <td>
                {{ averages.s5_mset.score }}/{{ averages.s5_mset.max }}
            </td>
            <td>
                {{ averages.s6_cb.score }}/{{ averages.s6_cb.max }}
            </td>
            <td>
                {{ averages.s7_dsi.score }}/{{ averages.s7_dsi.max }}
            </td>
            <td>
                {{ averages.s8_est.score }}/{{ averages.s8_est.max }}
            </td>
            <td>
                {{ averages.s9_ee.score }}/{{ averages.s9_ee.max }}
            </td>
        {% for council in council_data %}
        <tr>
            <td>
                <a href="{% url 'answers' council.slug %}">{{ council.name }}</a>
            </td>
            <td>
                {{ council.percentage }}
            </td>
            {% with scores=council.all_scores %}
            <td>
                {{ scores.s1_gov.score }}/{{ scores.s1_gov.max }}
            </td>
            <td>
                {{ scores.s2_m_a.score }}/{{ scores.s2_m_a.max }}
            </td>
            <td>
                {{ scores.s3_c_a.score }}/{{ scores.s3_c_a.max }}
            </td>
            <td>
                {{ scores.s4_coms.score }}/{{ scores.s4_coms.max }}
            </td>
            <td>
                {{ scores.s5_mset.score }}/{{ scores.s5_mset.max }}
            </td>
            <td>
                {{ scores.s6_cb.score }}/{{ scores.s6_cb.max }}
            </td>
            <td>
                {{ scores.s7_dsi.score }}/{{ scores.s7_dsi.max }}
            </td>
            <td>
                {{ scores.s8_est.score }}/{{ scores.s8_est.max }}
            </td>
            <td>
                {{ scores.s9_ee.score }}/{{ scores.s9_ee.max }}
            </td>
            {% endwith %}
        </tr>
        {% endfor %}
        </tbody>
    </table>

{% endblock %}
