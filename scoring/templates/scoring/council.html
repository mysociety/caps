{% extends "scoring/base.html" %}
{% load django_bootstrap5 %}
{% load caps_templatetags %}

{% block content %}
<div class="hero-section with-version-background pt-5 pb-6 pt-lg-8 pb-lg-8 ">
    <div class="d-flex flex-column align-items-end align-items-lg-start hero-version-badge position-absolute">
      <span class="version-year d-block fw-bold lh-1">2023</span>
      <span class="version-name d-block fw-bold lh-1">Action Scorecards</span>
    </div>
    <div class="container">
        <a class="cta reverse white" href="{% url 'scoring:home' %}">Back to the Scorecards</a>
        <h1 class="mt-3">{{ council.name }}</h1>
        <div class="mt-3">
            {% if plan_score.top_performer %}
              <div class="badge bg-secondary p-2">
                {% include 'caps/icons/scorecards-star.html' with classes='text-info align-text-bottom me-1' width='1rem' height='1rem' role='presentation' %}
                <span class="fs-6">Top Performer</span>
              </div>
            {% endif %}
            <span class="badge bg-secondary p-2 fs-6">{{ authority_type.name }}</span>
        </div>
    </div>
</div>

{% comment %} TODO 
CHECK which about section is prefered.
{% endcomment %}
<div class="container d-none">
    <div class="row">
        <div class="col-12 col-lg-5">
            <div class="pt-3">
                <h3 class="mb-3">About this council</h3>
                {% if new_council %}
                <p>This council was created on April 1, 2023 so was not included in the 2021 Scorecards.</p>
                {% elif old_council %}
                <p>This council was dissolved on {{ council.end_date }} so was not included in the 2021 Scorecards.</p>
                {% else %}
                {% if plan_score.top_performer %}
                <p class="top-performer.active mb-2">This council is a top performer within {% include 'caps/includes/authority_type.html' with group=authority_type %} councils.</p>
                {% endif %}

                <div class="mt-3">
                  <a class="btn btn-primary btn-sm" href="{% include 'scoring/includes/scoring_url.html' with slug=council.get_scoring_group.slug %}">See council in context</a>
                  {% comment %} TODO Add link to old version pages of this council {% endcomment %}
                  <a href="" class="btn btn-outline-primary btn-sm ms-3">Check 2021 version of this council</a>
                </div>


                <dl class="mt-4">
                    <dt class="fw-normal">Nation</dt>
                    <dd class="badge bg-secondary mb-3 fs-7">{{ council.get_country_display }}</dd>

                    <dt class="fw-normal">Net-zero target date</dt>
                    {% for target in targets %}
                    {% if target.scope is None %}
                      <dd class="badge bg-secondary mb-3 fs-7">No target</dd>
                    {% else %}
                      <dd class="badge bg-secondary mb-3 fs-7">{{ target.get_scope_display }}: {{ target.target_year }}</dd>
                    {% endif %}
                    {% endfor %}

                    {% if plan_score.deprivation_quintile %}
                        <dt class="fw-normal">Index of multiple deprivation</dt>
                        <dd class="badge bg-secondary mb-3 fs-7">{{ plan_score.deprivation_quintile }}</dd>
                    {% endif %}

                    {% if plan_score.population %}
                        <dt class="fw-normal">Total population</dt>
                        <dd class="badge bg-secondary mb-3 fs-7">{{ plan_score.population }}</dd>
                    {% endif %}

                    {% if plan_score.get_ruc_cluster_display %}
                        <dt class="fw-normal">Urbanisation</dt>
                        <dd class="badge bg-secondary mb-3 fs-7">{{ plan_score.get_ruc_cluster_display }}</dd>
                    {% endif %}

                    {% if plan_score.political_control %}
                        <dt class="fw-normal">Political control (Jan 2022)</dt>
                        <dd class="badge bg-secondary mb-3 fs-7">{{ plan_score.political_control }}</dd>
                    {% endif %}
                </dl>
                {% endif %}
            </div>
        </div>

        <div class="col-12 col-lg-5 offset-lg-2 mt-4 mt-lg-0">
            <div class="about-section-child bg-grey-gradient-darker p-3">
                <h3 class="mb-3">About the scoring</h3>
                <p>Climate Emergency UK assessed plans according to 28 questions across nine sections, based on the expert-approved <a class="d-inline-block" href="https://www.climateemergency.uk/blog/climate-action-plan-checklist/">checklist for Council Action Plans</a>. Each council was marked against these criteria and given a right to reply before the scores underwent a final audit. This work was completed between June and December 2021. Action Plans and related documents that were publicly available after September 2015 and before 20 September 2021 were marked. </p>
                {% if plan_urls %}
                <div class="alert alert-info w-100">
                  <p class="fs-6 fw-bold">Has this council updated their Climate Action Plan? </p>
                  <a class="btn btn-primary btn-sm d-table" href="https://cape.mysociety.org/councils/{{ council.slug }}">Check our database to find out</a></div>
                {% else %}
                  <div class="alert alert-info w-100">
                    <p class="fs-6 fw-bold">Has this council released a Climate Action Plan plan recently? </p>
                    <a class="btn btn-primary btn-sm d-table" href="https://cape.mysociety.org/councils/{{ council.slug }}">Check our database to find out</a></div>
                {% endif %}
              {% if authority_type.slug == 'district' %}
                <p>This district council is signed up to their county council's joint Climate Action Plan. Here, if the district council has a plan, they are marked on their own plan and the county plan, depending on which is relevant to each question. <a class="d-inline-block" href="{% url 'scoring:methodology2022' %}">You can find out more about this in the methodology.</a></p>
              {% endif %}
              {% if plan_urls %}
                <details>
                    <summary class="btn btn btn-blue is--light mt-2 mt-sm-3">See which plans were marked</summary>
                    <ul class="scoring-source-links">
                      {% for plan_url in plan_urls %}
                        <li><a href="{{ plan_url.plan_url }}" title="{{ plan_url.plan_url|url_human }}">{{ plan_url.plan_url|url_human }}</a></li>
                      {% endfor %}
                    </ul>
                </details>
              {% endif %}
            </div>
        </div>

    </div>
</div>

<div class="container py-5">
  <div class="row">
    <div class="col-12 col-lg-6">
        <div class="accordion" id="accordionMainMenu">
            <div class="accordion-item">
              <h2 class="accordion-header" id="mainMenuHeadingOne">
                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#mainMenuCollapseOne" aria-expanded="true" aria-controls="mainMenuCollapseOne">
                    <span class="badge bg-primary border border-white me-1">A</span>
                    About this council
                </button>
              </h2>
              <div id="mainMenuCollapseOne" class="accordion-collapse collapse show" aria-labelledby="mainMenuHeadingOne" data-bs-parent="#accordionMainMenu">
                <div class="accordion-body py-4">
                  {% if new_council %}
                  <p>This council was created on April 1, 2023 so was not included in the 2021 Scorecards.</p>
                  {% else %}
                  {% if plan_score.top_performer %}
                  {% include 'caps/icons/scorecards-star.html' with classes='text-info align-text-bottom me-1' width='1.2em' height='1.2rem' role='presentation' %}
                  <span class="top-performer.active mb-2">This council is a top performer within {% include 'caps/includes/authority_type.html' with group=authority_type %} councils.</span>
                  {% endif %}
                  <div class="mt-3">
                    <a class="btn btn-primary btn-sm" href="{% include 'scoring/includes/scoring_url.html' with slug=council.get_scoring_group.slug %}">See council in context</a>
                    {% comment %} TODO Add link to old version pages of this council {% endcomment %}
                    <a href="" class="btn btn-outline-primary btn-sm ms-3">Check 2021 version of this council</a>
                  </div>

                  <dl class="mb-0 mt-4">
                      <dt class="fw-normal">Nation</dt>
                      <dd class="badge bg-secondary mb-3 fs-7">{{ council.get_country_display }}</dd>
                      <dt class="fw-normal">Net-zero target date</dt>
                      {% for target in targets %}
                      {% if target.scope is None %}
                        <dd class="badge bg-secondary mb-3 fs-7">No target</dd>
                      {% else %}
                        <dd class="badge bg-secondary mb-3 fs-7">{{ target.get_scope_display }}: {{ target.target_year }}</dd>
                      {% endif %}
                      {% endfor %}
  
                      {% if plan_score.deprivation_quintile %}
                          <dt class="fw-normal">Index ofdtmultiple deprivation</dt>
                          <dd class="badge bg-secondary mb-3 fs-7">{{ plan_score.deprivation_quintile }}</dd>
                      {% endif %}
  
                      {% if plan_score.population %}
                          <dt class="fw-normal">Total podtulation</dt>
                          <dd class="badge bg-secondary mb-3 fs-7">{{ plan_score.population }}</dd>
                      {% endif %}
  
                      {% if plan_score.get_ruc_cluster_display %}
                          <dt class="fw-normal">Urbanisadtion</dt>
                          <dd class="badge bg-secondary mb-3 fs-7">{{ plan_score.get_ruc_cluster_display }}</dd>
                      {% endif %}
  
                      {% if plan_score.political_control %}
                          <dt class="fw-normal">Politicadt control (Jan 2022)</dt>
                          <dd class="badge bg-secondary fs-7">{{ plan_score.political_control }}</dd>
                      {% endif %}
                  </dl>
                  {% endif %}
                </div>
              </div>
            </div>
            <div class="accordion-item">
              <h2 class="accordion-header" id="mainMenuHeadingTwo">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#mainMenuCollapseTwo" aria-expanded="false" aria-controls="mainMenuCollapseTwo">
                    <span class="badge bg-primary border border-white me-1">B</span>
                    About the scoring system
                </button>
              </h2>
              <div id="mainMenuCollapseTwo" class="accordion-collapse collapse" aria-labelledby="mainMenuHeadingTwo" data-bs-parent="#accordionMainMenu">
                <div class="accordion-body py-4 d-flex flex-row flex-wrap" style="gap:0.5rem">
                  <p>Climate Emergency UK assessed plans according to 28 questions across nine sections, based on the expert-approved <a class="d-inline-block" href="https://www.climateemergency.uk/blog/climate-action-plan-checklist/">checklist for Council Action Plans</a>. Each council was marked against these criteria and given a right to reply before the scores underwent a final audit. This work was completed between June and December 2021. Action Plans and related documents that were publicly available after September 2015 and before 20 September 2021 were marked. </p>
                  {% if plan_urls %}
                    <div class="alert alert-info w-100 mb-0">
                      <p class="fs-6 fw-bold">Has this council updated their Climate Action Plan? </p>
                      <a class="btn btn-primary btn-sm d-table" href="https://cape.mysociety.org/councils/{{ council.slug }}">Check our database to find out</a></div>
                  {% else %}
                    <div class="alert alert-info w-100 mb-0">
                      <p class="fs-6 fw-bold">Has this council released a Climate Action Plan plan recently? </p>
                      <a class="btn btn-primary btn-sm d-table" href="https://cape.mysociety.org/councils/{{ council.slug }}">Check our database to find out</a></div>
                  {% endif %}
                  {% if authority_type.slug == 'district' %}
                    <p>This district council is signed up to their county council's joint Climate Action Plan. Here, if the district council has a plan, they are marked on their own plan and the county plan, depending on which is relevant to each question. <a class="d-inline-block" href="{% url 'scoring:methodology2022' %}">You can find out more about this in the methodology.</a></p>
                  {% endif %}
                  {% if plan_urls %}
                    {% comment %} <details>
                        <summary class="btn btn btn-blue is--light mt-2 mt-sm-3">See which plans were marked</summary>
                        <ul class="scoring-source-links">
                          {% for plan_url in plan_urls %}
                            <li><a href="{{ plan_url.plan_url }}" title="{{ plan_url.plan_url|url_human }}">{{ plan_url.plan_url|url_human }}</a></li>
                          {% endfor %}
                        </ul>
                    </details> {% endcomment %}

                    <h3 class="fs-5 mt-4 mt-lg-5">See which plans were marked</h3>
                    {% for plan_url in plan_urls %}
                    <li><a style="word-break: break-all;" class="mb-2" href="{{ plan_url.plan_url }}" title="{{ plan_url.plan_url|url_human }}">{{ plan_url.plan_url|url_human }}</a></li>
                    {% endfor %}

                    {% comment %} TODO Add link to methodology {% endcomment %}
                    <h3 class="fs-5 mt-4 mt-lg-5">Key definitions</h3>
                    <dl>
                      <a href="" class="btn btn-outline-primary d-table mb-3">Check full methodology</a>
                      <dt class="fs-7 badge bg-secondary mb-2">Score</dt>
                      <dd class="mb-4">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</dd>

                      <dt class="fs-7 badge bg-secondary mb-2">weighting</dt>
                      <dd>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</dd>
                    </dl>

                  {% endif %}
                </div>
              </div>
            </div>
        </div>
    </div>
  </div>
</div>

{% if not new_council and not old_council %}
<div class="container council-page mt-4 js-dynamic-content" data-active-source-type="default">

  <div class="row mb-4">
    <div class="col-sm-10 col-lg-6">
      <h3 class="mb-3">
        Individual question performance
      </h3>

      <p class="mb-4">Each category on the Scorecards is broken down into several individual questions, as guided by Climate Emergency UK’s <a href="https://www.climateemergency.uk/blog/climate-action-plan-checklist/" class="d-inline-block">checklist for councils’ Action Plans</a>. This is the most granular data we hold for each councils’ Scorecard.
      </p>

      <div class="accordion" id="accordionQuestionCouncil">
        <div class="accordion-item">
          <h2 class="accordion-header" id="QuestionCouncilheadingOne">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#QuestionCouncilcollapseOne" aria-expanded="true" aria-controls="QuestionCouncilcollapseOne">
              Filter questions by source type
            </button>
          </h2>
          <div id="QuestionCouncilcollapseOne" class="accordion-collapse collapse show" aria-labelledby="QuestionCouncilheadingOne" data-bs-parent="#accordionQuestionCouncil">
            <div class="accordion-body">
              <div class="d-flex flex-row flex-wrap" style="gap:0.5rem">
                <button class="radio-btn is--with-label mr-1" data-question-source-type="default">All</button>
                <button class="radio-btn is--with-label mr-1" data-question-source-type="volunteer">Volunteer Research</button>
                <button class="radio-btn is--with-label mr-1" data-question-source-type="foi">FOI</button>
                <button class="radio-btn is--with-label mr-1" data-question-source-type="national-data">National Data</button>
                <button class="radio-btn is--with-label mr-1" data-question-source-type="national-data-and-volunteer">National Data and Volunteer Research</button>
              </div>
          
              <form class="mt-3">
                  <input class="me-1 is--small" type="checkbox" id="council-operations-only" name="council-operations-only" >
                  <label for="council-operations-only">Display only Council operations questions</label>
              </form>
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h2 class="accordion-header" id="QuestionCouncilheadingTwo">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#QuestionCouncilcollapseTwo" aria-expanded="false" aria-controls="QuestionCouncilcollapseTwo">
              Add councils to compare
            </button>
          </h2>
          <div id="QuestionCouncilcollapseTwo" class="accordion-collapse collapse" aria-labelledby="QuestionCouncilheadingTwo" data-bs-parent="#accordionQuestionCouncil">
            <div class="accordion-body">
              <div class="mobile-message d-sm-none p-3 text-bg-secondary">
                <h3 class="exclamation text-white">Visit us again on a bigger screen</h3>
                <p class="text-white">You’ll find more options, like the ability to compare your council’s Scorecard with other councils, and see a more granular breakdown of how they did on each question of the Scorecards.</p>
              </div>
              <div class="d-none d-lg-block">
                <form class="d-none d-lg-block" id="advancedFilterForm" action=".">
                  {% if comparisons|length > 2 %}
                  <p class="warning-message">You have reached the maximum number of councils that may be compared.</p>
                {% else %}
                  <input class="border border-primary form-control searchbar blue dark js-location-compare-autocomplete" name="search" id="compare-search" type="search" placeholder="Council name" aria-label="Council name">
                {% endif %}
                {% if comparisons %}
                  <div class="selected-council-wrapper mt-4">
                    {% for comparison in comparisons %}
                      <a href="#" class="radio-btn is--with-label is--with-closed-icon mr-1 js-comparison-council" data-slug="{{ comparison.council.slug }}">{{ comparison.council.name }}</a>
                    {% endfor %}
                  </div>
                  {% comment %} <a href="{% url "council" council.slug %}" class="mt-3">Clear all</a> {% endcomment %}
                {% endif %}
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>

      {% comment %} {% include 'scoring/includes/council-source-filter.html' %}
      {% include 'scoring/includes/compare-council-modal.html' %} {% endcomment %}
    </div>
  </div>


  <div class="row mb-5 mt-4">
    <div class="col-12">
      <div class="position-relative" style="display: table">
          <table class="table-question-council mb-0">
              <thead class="text-bg-primary">
                  <tr>
                      <th scope="col" class="text-start question-header-cell border-end border-opacity-25 border-primary">Questions</th>
                      <th scope="col" class="current-council-score">{{ council.name }}</th>

                    {% for comparison in comparisons %}
                      <th scope="col" class="d-none d-md-table-cell comparison-council">{{ comparison.council.name }}</th>
                    {% endfor %}

                      <th scope="col" class="d-none d-md-table-cell d-flex flex-row align-items-center">
                        {% include 'caps/icons/scorecards-star.html' with classes='text-info align-text-bottom me-1' width='1.2em' height='1.2rem' role='presentation' %}

                        <span>Councils with full marks</span>
                      </th>
                  </tr>
              </thead>
            {% for section in sections %}
              <tbody class="table-question-council__section">
                  <tr data-has-plan="no" class="section-row bg-primary-100">
                      <td colspan="1" class="section-cell border-bottom border-end border-opacity-25 border-primary text-start">
                          {{ section.description }}
                          {% comment %} TODO Add conditional if this council has a negative penalty scored in this section {% endcomment %}
                          <p class="alert alert-warning d-flex flex-row align-items-center gap-2 p-2 mt-3">
                            {% comment %} TODO update the percentage {% endcomment %}
                            {% include 'caps/icons/warning.html' with classes='align-text-bottom' width='1em' height='1em' role='presentation' %}
                            <span class="fs-7">
                              {{ council.name }} has a penalty of 15% in this section
                            </span>
                          </p>
                          <button type="button" class="d-block mt-2 d-md-none btn btn-outline-primary btn-sm js-toggle-council-question-table-section rounded-0" aria-label="Expand this section" title="Expand this section">
                            {% include 'caps/icons/chevron-down.html' with classes='align-text-bottom' width='1.2em' height='1.2em' role='presentation' %}
                            Show more
                          </button>
                      </td>

                      {% if section.top_performer %}
                        <td class="score border-bottom border-opacity-25 border-primary is--section-score">
                          {% include 'caps/icons/scorecards-star.html' with classes='text-info align-text-bottom me-1' width='1.2em' height='1.2rem' role='presentation' %}
                          <span>{{ section.score }}/{{ section.max_score }}</span>
                        </td>
                      {% else %}
                        <td class="score border-bottom border-opacity-25 border-primary is--section-score">
                          <span>{{ section.score }}/{{ section.max_score }}</span>
                          {% comment %} TODO Update obtained points minus the penalty {% endcomment %}
                          <div class="fs-7">
                            {{ section.score }} = Total score(22) - Penalty points(3)
                          </div>
                        </td>
                      {% endif %}

                    {% for comparison in section.comparisons %}
                      <td class="d-none d-md-table-cell score border-bottom border-opacity-25 border-primary is--section-score {% if comparison.top_performer %}top-performer{% endif %}">
                          {{ comparison.score }}/{{ comparison.max_score }}
                      </td>
                    {% endfor %}
                      <td class="d-none d-md-table-cell top-tier-score border-bottom border-opacity-25 border-primary">
                      </td>
                      <td class="button-wrapper p-0 bg-white d-none d-md-table-cell">
                          <button type="button" class="btn btn-outline-primary js-toggle-council-question-table-section border-start-0 rounded-0" aria-label="Expand this section" title="Expand this section">
                            {% include 'caps/icons/chevron-down.html' with classes='align-text-bottom' width='1.2em' height='1.2em' role='presentation' %}
                          </button>
                      </td>
                  </tr>
                {% for answer in section.answers %}
                {% comment %} TODO 
                Add the source(How this question is marked) to tr element.
                    'js-volunteer',
                    'js-foi',
                    'js-national-data',
                    'js-national-data-and-volunteer',
                {% endcomment %}
                {% comment %} TODO 
                  council operation only switch
                  for each row add the correct attribute value. For council only the value should be true, otherwise false.
                  [data-active-council-operation-only="false"]
                {% endcomment %}
                  <tr class="question-row js-default js-volunteer" data-active-council-operation-only="true">
                    <td data-column="answer" class="border-start border-bottom border-end ">
                        <div class="question-content-table text-start">
                          <span class="badge bg-secondary p-1 question-no">{{ answer.pretty_code }}</span>

                          {% comment %} TODO Add an if question is negative {% endcomment %}
                          <div class="alert alert-warning p-2 mt-2">
                            <p class="alert-heading fw-bold fs-7 mb-2">
                              {% include 'caps/icons/warning.html' with width='1.2rem' height='1.2rem' classes='align-top me-1' role='presentation' %}
                              Negative point question
                            </p>
                            <p class="fs-7 mb-1">For a negative question the maximum number of points is 0.</p>

                            {% comment %} TODO add link to this question in methodology {% endcomment %}
                            <a href="" class="alert-link fs-7">See this question in more detail</a>
                          </div>

                          {% comment %} TODO Question meta {% endcomment %}
                          <div class="js-collapse-children">
                              {{ answer.question | linebreaks }}
                          </div>
                          <dl class="mt-3 mb-2 d-flex flex-column align-items-start">
                            <dt class="fs-7 mb-1">Source:</dt>
                            <dd class="badge bg-blue-500">National Data and Volunteer Research</dd>
                          </dl>
                          <dl class="d-flex flex-column align-items-start">
                            <dt class="fs-7 mb-1">Question weight:</dt>
                            <dd class="badge bg-secondary">Low</dd>
                          </dl>

                          <details>
                            <summary class="fw-bold">Evidence</summary>
                            <ul>
                              <li><a href="">Example</a></li>
                              <li><a href="">Example with a longer title</a></li>
                              <li><a href="">Example with a longer title because I need to see what happens</a></li>
                            </ul>
                          </details>
                        </div>
                    </td>

                    <td data-column="score" class="score border-bottom">
                        <span>{{ answer.score }}/{{ answer.max }}</span>
                        {% comment %} TODO IF question is negative then "No negative points awarded" {% endcomment %}
                    </td>

                    {% for comparison in answer.comparisons %}
                      <td data-column="score" class="d-none d-md-table-cell score border-bottom">
                          <span>{{ comparison.score }}/{{ comparison.max }}</span>
                      </td>
                    {% endfor %}

                    <td class="d-none d-md-table-cell top-tier-score border-bottom border-end">
                      <a href="{% include 'scoring/includes/scoring_url.html' with slug=authority_type.slug %}?sort_by={{ section.code }}" class="mx-auto" style="text-transform: none">
                        {{ answer.council_count }} out of {{ council_count }}
                      </a> 
                      <span class="fs-8 mt-1 me-0 ms-auto d-block">{% include 'caps/includes/authority_type.html' with group=authority_type %} councils got full marks for this question.</span>
                    </td>
                  </tr>
                {% endfor %}
              </tbody>
            {% endfor %}
          </table>
      </div>
    </div>
  </div>
</div>
{% endif %}

{% comment %} <script>
    // Open modals and filters
    const modalTriggers = document.querySelectorAll('.popup-trigger')
    const modalCloseTrigger = document.querySelector('.popup-modal__close')
    
    modalTriggers.forEach(trigger => {
        trigger.addEventListener('click', () => {
            const { popupTrigger } = trigger.dataset;
            const popupModal = document.querySelector(`[data-popup-modal="${popupTrigger}"]`);
            popupModal.classList.add('is--visible');

            popupModal.querySelector('.popup-modal__close').addEventListener('click', () => {
            popupModal.classList.remove('is--visible');
            })
        })
    })
</script> {% endcomment %}
{% endblock %}
