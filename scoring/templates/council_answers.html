{% extends "scoring/base.html" %}
{% load bootstrap4 %}

{% block content %}

<div class="container about-section">
    <div class="row">
        <div class="col-12 col-lg-5">
            <div class="about-section-child p-3">
                <h3 class="mb-3">About this council</h3>
                <p class="top-performer.active mb-0">This council is a top performer on the single tier councils on the Climate League.</p>
                <a href="link to the homepage table with all the right type of council filter applied">(See in context)</a>
                <div class="group-label-wrapper mt-5">
                    <div class="label-wrapper">
                        <p class="label green">Nation</p>
                        <p>England</p>
                    </div>
                    <div class="label-wrapper">
                        <p class="label green">Climate pledge target</p>
                        <p>England</p>
                    </div>
                    <div class="label-wrapper">
                        <p class="label green">Annual income</p>
                        <p>England</p>
                    </div>
                    <div class="label-wrapper">
                        <p class="label green">Current political control</p>
                        <p>England</p>
                    </div>
                    <div class="label-wrapper">
                        <p class="label green">Deprivation index</p>
                        <p>England</p>
                    </div>
                    <div class="label-wrapper">
                        <p class="label green">total population</p>
                        <p>England</p>
                    </div>
                    <div class="label-wrapper">
                        <p class="label green">Urbanization</p>
                        <p>England</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-12 col-lg-2"></div>
        <div class="col-12 col-lg-5">
            <div class="about-section-child bg-grey-gradient-darker p-3">
                <h3 class="mb-3">About the scoring</h3>
                <p>Amet minim mollit non deserunt 
                    ullamco est sit aliqua dolor do amet sint. Velit officia consequat duis enim velit mollit. Exercitation veniam consequat sunt nostrud amet.
                </p>
                <p>Amet minim mollit non deserunt 
                    ullamco est sit aliqua dolor do amet sint. Velit officia consequat duis enim velit mollit. Exercitation veniam consequat sunt nostrud amet.
                </p>
                {% comment %} If there is only one plan {% endcomment %}
                <button type="button">Display the action plans</button>
            </div>
        </div>
    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col-md-12">
            <div class="mb-3 mb-md-4 mb-lg-5">
                <div class="table-header mb-5">
                    <h3>
                        Section
                    </h3>
                    <p>Amet minim mollit non deserunt 
                        ullamco est sit aliqua dolor do amet sint. Velit officia consequat duis enim velit mollit. Exercitation veniam consequat sunt nostrud amet.
                    </p>
                    <button>Choose councils to compare</button>
                </div>
                <div style="display:table">
                    <div class="mobile-message">
                        <h3 class="exclamation text-white">Visit us again on a bigger screen</h3>
                        <p class="text-white">You can compare your council with others, also check the average score in the section and question tables.</p>
                    </div>
                    <table class="table-section mb-0">
                        <thead>
                            <tr>
                                <th scope="col" class="text-left">Section</th>
                                <th scope="col">Council Score</th>
                                <th scope="col">
                                    <p>Average Score</p>
                                    <span class="filter-active">Single Tier</span>
                                    <span class="filter-active">·</span>
                                    <span class="filter-active">Urban</span>
                                    <button class="advanced-filter-simple mx-auto d-block mt-1"></button>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for section in sections.values %}
                            <tr>
                                <td>
                                    <div>
                                    {{ section.description }}
                                    </div>
                                </td>
                                <td>
                                    {% comment %} Needs a conditional so when a council 
                                    have scored the max  amount of points get a star{% endcomment %}
                                    <span class="top-perfomer">
                                    {{ section.score }}/{{ section.max_score }}
                                    </span>
                                </td>
                                <td>
                                    {{ section.avg }}
                                </td>
                            </tr>
                          {% endfor %}
                        </tbody>
                    </table>
                    <div class="table-footer mt-2">
                        <a class="mt-3" href="">See results in context</a>
                        <div class="social-media-wrapper">
                            <a class="table-social-icon facebook mr-1" href=""></a>
                            <a class="table-social-icon twitter" href=""></a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mb-3 mb-md-4 mb-lg-5">
                <div class="table-header mb-5">
                    <h3>
                        Question
                    </h3>
                    <p>Amet minim mollit non deserunt 
                        ullamco est sit aliqua dolor do amet sint. Velit officia consequat duis enim velit mollit. Exercitation veniam consequat sunt nostrud amet.
                    </p>
                    <button>Choose councils to compare</button>
                </div>
                <div style="display: table">
                    <table class="table-question-council mb-0">
                        <thead>
                            <tr>
                                <th scope="col">#</th>
                                <th scope="col" class="text-left">Question</th>
                                {% comment %} TODO Instead of score, let's use the name of the council {% endcomment %}
                                <th scope="col">Score</th>
                                <th scope="col">
                                    <p>Top Performers</p>
                                    <span class="filter-active">Single Tier</span>
                                    <span class="filter-active">·</span>
                                    <span class="filter-active">Urban</span>
                                    <button class="advanced-filter-simple mx-auto d-block mt-1"></button>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for section in sections.values %}
                            <tr data-has-plan="no" class="bg-green section-row">
                                <td></td>
                                <td colspan="1" class="section-cell">
                                    {{ section.description }}
                                </td>
                                <td>
                                    {{ section.score }}/{{ section.max_score }}
                                </td>
                                <td>
                                    {% comment %} TODO add single top perfomers {% endcomment %}
                                    {% comment %} Eg: 15 out of 120, this is a link{% endcomment %}
                                    <a href="#" class="mx-auto" style="text-transform: none">15 out of 120</a>
                                </td>
                                <td class="button-wrapper p-0">
                                    {% comment %} TODO what would probably work for the accordion is
                                    to add a class to the "tr" element below this one with the section name, and then
                                    the button just an active state to all the "tr" that share the same class.
                                    {% endcomment %}
                                    <button type="button" class="accordion">
                                        <div class="mx-auto"></div>
                                    </button>
                                </td>

                            </tr>
                            {% for answer in section.answers %}
                            {% if answer.type == 'HEADER' %}
                            <tr class="header-question">
                            {% else %}
                            <tr class="subpoint-question">
                            {% endif %}
                                <td data-column="question_no" class="question-no">
                                    <div>
                                        {% if answer.type == 'HEADER' %}
                                        <a href="{% url 'answercouncils' answer.code %}">{{ answer.display_code }}</a>
                                        {% else %}
                                        <div class="pl-2">
                                            {{ answer.display_code }}
                                        </div>
                                        {% endif %}
                                    </div>
                                </td>
                                {% if answer.type == 'HEADER' %}
                                <td data-column="answer" colspan="1">
                                {% else %}
                                <td data-column="answer">
                                {% endif %}
                                    <div class="question-content">
                                        {{ answer.question | linebreaks }}
                                    </div>
                                </td>
                                {% if answer.type != 'HEADER' %}
                                <td data-column="score">
                                    {{ answer.score }}/{{ answer.max }}
                                </td>
                                {% else %}
                                <td data-column="score">
                                    {% comment %}TODO score obtained / the total points for the header question {% endcomment %}
                                    7/10
                                </td>
                                <td data-column="top-tier-score" class="top-tier-score">
                                    <a href="#" class="mx-auto" style="text-transform: none">13 out of 120</a>
                                </td>
                                {% endif %}
                            </tr>
                            {% endfor %}
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>


{% endblock %}
